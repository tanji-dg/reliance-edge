#
# makefile for Linux project in Reliance Edge
#
B_HOSTOS=linux

P_PROJDIR ?= $(shell pwd)
P_BASEDIR ?= $(shell readlink -f $(P_PROJDIR)/../..)

B_DEBUG = 0
#B_DEBUG ?= 1

P_CFLAGS +=-Werror
ifneq ($(B_DEBUG),0)
P_CFLAGS +=-DDEBUG
else
P_CFLAGS +=-O
endif

.PHONY: all
all: fsstress

include $(P_BASEDIR)/build/hostos.mk
include $(P_BASEDIR)/build/toolset.mk
include $(P_BASEDIR)/build/reliance.mk

INCLUDES=$(REDALLINC)

REDPROJOBJ=\
	$(P_PROJDIR)/fsstress_main.$(B_OBJEXT)

$(P_PROJDIR)/fsstress_main.$(B_OBJEXT):		$(P_PROJDIR)/fsstress_main.c $(REDHDR)

fsstress: $(P_PROJDIR)/fsstress_main.$(B_OBJEXT) $(REDTESTOBJ)
	$(B_LDCMD) host/libred.so.1.0.0

.PHONY: clean
clean:
	$(B_DEL) $(REDALLOBJ) $(REDPROJOBJ)
	$(B_DEL) $(P_PROJDIR)/*.$(B_OBJEXT)
	$(B_DEL) fsstress
